<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Mini Smart Farm Kit</title>
    <style>
        body {
            font-family: 'Economica', sans-serif;
            font-size: 1.2rem;
        }

        a:hover,
        a:focus {
            border-bottom: 1px dotted #000;
        }

        /*GOOD*/

        #text3d {
            color: #8335b7;
            letter-spacing: .45em;
            text-shadow: -1px -1px 1px #efede3,
            0px 1px 0 #2e2e2e,
            0px 2px 0 #2c2c2c,
            0px 3px 0 #2a2a2a,
            0px 4px 0 #282828,
            0px 5px 0 #262626,
            0px 6px 0 #242424,
            0px 7px 0 #222,
            0px 8px 0 #202020,
            0px 9px 0 #1e1e1e,
            0px 10px 0 #1c1c1c,
            0px 11px 0 #1a1a1a,
            0px 12px 0 #181818,
            0px 13px 0 #161616,
            0px 14px 0 #141414,
            0px 15px 0 #121212,
            2px 20px 5px rgba(0, 0, 0, 0.9),
            5px 23px 5px rgba(0, 0, 0, 0.3),
            8px 27px 8px rgba(0, 0, 0, 0.5),
            8px 28px 35px rgba(0, 0, 0, 0.9);
        }

        /*¹öÆ°*/

        [class*='btn-'] {
            border-radius: 4px;
            -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.08);
            -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.08);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.08);
            color: #fff;
            display: inline-block;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 100px;
            padding: 8px 16px;
            text-decoration: none;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.075);

            -webkit-transition: background-color 0.1s linear;
            -moz-transition: background-color 0.1s linear;
            -o-transition: background-color 0.1s linear;
            transition: background-color 0.1s linear;
        }

        [class*='btn-']:hover {
            cursor: pointer;
        }

        .btn-blue {
            background-color: rgb( 51, 102, 204);
            border: 1px solid rgb( 44, 91, 104);
        }

        .btn-blue:hover {
            background-color: rgb( 58, 131, 213);
        }

        .btn-blue:active {
            background-color: rgb( 42, 91, 191);
        }


        .btn-primary {
            background-color: rgb( 74, 61, 117);
            border: 1px solid rgb( 44, 37, 59);
        }

        .btn-primary:hover {
            background-color: rgb( 92, 76, 131);
        }

        .btn-primary:active {
            background-color: rgb( 54, 44, 87);
        }

        /*We are fixing a menu and pulling them out of the screen by negative 'left'*/

        .side-menu {
            padding: 0;
            margin: 0;
            font-size: 0;
            position: fixed;
            left: -120px;
            top: 100px;
            opacity: .95;
            overflow: hidden;
            -webkit-transition: all .3s ease-in-out;
            transition: all .3s ease-in-out;
        }

        /*We need to hide the default input box*/

        #menu-button {
            display: none;
        }

        /*if checkbox is checked next sibling's .side menu child slides in*/

        #menu-button:checked+.menu-wrap .side-menu {
            left: 0px;
        }

        /*this is the label for the checkbox which act as a button for our menu*/

        .menu-button--label {
            color: black;
            position: fixed;
            top: 50px;
            left: 10px;
            font-size: 3rem;
            text-align: center;
            line-height: 0;
            cursor: pointer;
            -webkit-transition: all 1s;
            transition: all 1s;
        }

        /*Fancy rotation effect for our menu button. It rotates back when mouse leaves it */

        .menu-button--label:hover {
            -webkit-transform: rotateY(180deg);
            transform: rotateY(180deg);
            -webkit-transition: all 1s;
            transition: all 1s;
        }

        /*We are giving the li item a shorter width to activate 'pop-out' effect when you hover*/

        .side-menu--list li {
            font-size: 0;
            width: 110px;
        }

        .side-menu--list a {
            color: #fff;
            display: block;
            text-decoration: none;
            height: 2rem;
            line-height: 2rem;
            background: #333;
            padding-left: 1rem;
            width: 110px;
            font-size: 1.2rem;
        }

        .side-menu--list {
            list-style: none;
            padding-left: 0;
            width: 10rem;
        }

        /*.subset is a sub-menu that we are styling to stand out a bit*/

        .side-menu--list li a.subset {
            /* font-size: 1.4rem; */
            /* height: 2.2rem; */
            /* line-height: 2.2rem; */
            font-size: 1.1rem;
            height: 10rem;
            line-height: 8rem;
            padding-left: .5rem;
            background: #0B3B0B;
        }

        /*when you hover a li it expands to show all the menu links(and expands itself only)*/

        .side-menu--list li:hover {
            /* height: 8.2rem;
    width: 180px; */
            -webkit-transition: all .4s ease-in-out;
            transition: all .4s ease-in-out;
            font-size: 2rem;
            height: 12rem;
            line-height: 10rem;
            padding-top: 1.2rem;
            padding-left: .9rem;
            cursor: pointer;
        }
    </style>
    <!--firebase SDK 링크-->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
    <script src=" http://www.google.com/uds/modules/gviz/gviz-api.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://www.google.com/jsapi"></script>

    <script type="text/javascript"> 
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyB1lkDzQfP2A2YcHTp0lLOG9QMHrXExcBg",
            authDomain: "capstonemaster-3b52b.firebaseapp.com",
            databaseURL: "https://capstonemaster-3b52b.firebaseio.com",
            projectId: "capstonemaster-3b52b",
            storageBucket: "capstonemaster-3b52b.appspot.com",
            messagingSenderId: "463496465390"
        };
        firebase.initializeApp(config);

        var database = firebase.database(); //데이터베이스에서 데이터를 읽거나 쓰기 위하여 db참조를 가져온다.

        // google.charts.load('visualization', {packages: ['corechart']});
        // google.charts.setOnLoadCallback(drawChart);

        // function drawChart() {
        //     var data = new google.visualization.DataTable();
        //     data.addColumn('string', 'Month');
        //     data.addColumn('number', 'Water');
        //     data.addColumn('number', 'Light');
        //     data.addColumn('number', '℃/℉');

            // var keys;
            // var values;
            // var output = [];
            // firebase.database().ref('/farmGraph/test01/').once('value').then(function(snapshot) { //조도
            //     keys = Object.keys(snapshot.val());
            //     values = Object.values(snapshot.val());

            //     console.log(keys);
            //     console.log(values);
            // });
            // data.addRows(output);
            // console.log(keys);
            // console.log(values);

              
        


        ///userFarm/test01/humidity/status에 있는 값을 출력하기 위한 코드. test라는 id로 body에 div로 넘김.
        firebase.database().ref('/userFarm/test01/humidity/status').once('value').then(function (snap) {
            // console.log('snap.val()', snap.val());
            document.getElementById("humidity").innerHTML = snap.val();
        });
        firebase.database().ref('/userFarm/test01/illuminance/status').once('value').then(function (snap) {
            // console.log('snap.val()', snap.val());
            document.getElementById("illuminance").innerHTML = snap.val();
        });
        firebase.database().ref('/userFarm/test01/temperature/status').once('value').then(function (snap) {
            // console.log('snap.val()', snap.val());
            document.getElementById("temperature").innerHTML = snap.val();
        });

        var totalResult = "good";

        //text3d를 good이나 bad로 처리하는 코드.
        firebase.database().ref('/userFarm/test01/humidity/status').once('value').then(function (snap) { //습도       
            var keys = Object.keys(snap.val());
            for (i = 0; i < keys.length; i++) {
                if (snap.val() == "bad") {
                    totalResult = snap.val();
                }
            }
        });

        firebase.database().ref('/userFarm/test01/illuminance/status').once('value').then(function (snap) { //조도        
            var keys = Object.keys(snap.val());
            for (i = 0; i < keys.length; i++) {
                if (snap.val() == "bad") {
                    totalResult = snap.val();
                }
            }
        });

        firebase.database().ref('/userFarm/test01/temperature/status').once('value').then(function (snap) { //온도 
            var keys = Object.keys(snap.val());
            console.log(keys.length);
            for (i = 0; i < keys.length; i++) {
                if (snap.val() == "bad") {
                    totalResult = snap.val();
                }
            }

            document.getElementById("text3d").innerHTML = totalResult;

            if (totalResult == "bad") {
                document.getElementById("expression").src = "http://alleanzacattolica.org/wp-content/uploads/2017/10/e14_960_720.jpg";
            }
        });

            firebase.database().ref('/farmGraph/test01/').once('value').then(function(snapshot) { //조도
                keys = snapshot.val();
                
                google.charts.load('current', { packages: ['bar'] });
                google.charts.setOnLoadCallback(drawChart);
            
            function drawChart() {
              var array = $.map(keys, function(value, index) {
                  return [value];
              });

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Month');
            data.addColumn('number', 'Water');
            data.addColumn('number', 'Light');
            data.addColumn('number', '℃/℉');

            var tempData=[];
              var output = [];
              for (var i = 0; i < 8; i++) {
                  keys = Object.keys(snapshot.val());
                  values = Object.values(snapshot.val());

                  console.log(values);
                  console.log(values.humidity);
                  output.push([
                      keys[i],
                      //  parseFloat(parse(item.time)),
                      parseInt(values[i].humidity),
                      parseInt(values[i].illuminance),
                      parseInt(values[i].temperature)
                  ]);
              }

              console.log(output);
              data.addRows(output);
              var options = {
      title : 'Three essential elements for plant growth',
      vAxis: {title: 'Amount'},
      hAxis: {title: 'day'},
      seriesType: 'bars',
      series: {5: {type: 'line'}}
    };

            var chart = new google.charts.Bar(document.getElementById('chart_div'));
              chart.draw(data, google.charts.Bar.convertOptions(options));
              }});
             
              


            // Some raw data (not necessarily accurate)
            //var data = google.visualization.arrayToDataTable(growthTable);
    </script>

</head>

<body>
    <div id="humidity" class="btn-primary" style="position: absolute; left: 500px; top: 400px">
    </div>
    <div id="illuminance" class="btn-primary" style="position: absolute; left: 500px; top: 600px">
    </div>
    <div id="temperature" class="btn-primary" style="position: absolute; left: 500px; top: 800px">
    </div>
    <!--    Label is linked to the hidden checkbox-->
    <label for="menu-button" class="menu-button--label">▤</label>

    <!--    Checkbox state controls the menu position. When it is checked the menu slides in-->
    <input type="checkbox" id="menu-button">

    <!--    .menu-wrap is a wrapper for all the menu structure for the easier traversing-->
    <div class="menu-wrap">
        <div class="side-menu">
            <ul class="side-menu--list">
                <li>
                    <a class="subset" href="https://capstonemaster-3b52b.firebaseapp.com/Home.html">Home</a>
                </li>
                <li>
                    <a class="subset" href="https://capstonemaster-3b52b.firebaseapp.com/Humidity.html">Humidity</a>
                </li>
                <li>
                    <a class="subset" href="https://capstonemaster-3b52b.firebaseapp.com/Illumination.html">Illumination</a>
                </li>
                <li>
                    <a class="subset" href="https://capstonemaster-3b52b.firebaseapp.com/Temperature.html">Temperature</a>
                </li>
                <li>
                    <a class="subset" href="https://capstonemaster-3b52b.firebaseapp.com/Setting.html">Setting</a>
                </li>
            </ul>
        </div>
    </div>
    <div>

      
    </div>

    <a href="https://capstonemaster-3b52b.firebaseapp.com/Humidity.html" class="btn-blue" style="position: absolute; left: 200px; width:280px; top: 400px">
    Water </a>
    <a href="https://capstonemaster-3b52b.firebaseapp.com/Illumination.html" class="btn-blue" style="position: absolute; left: 200px; width:280px; top: 600px">Light </a>
    <a href="https://capstonemaster-3b52b.firebaseapp.com//Temperature.html" class="btn-blue" style="position: absolute; left: 200px; width:270px; height: 115px; top: 800px">℃/˚F </a>

    <h1 id="text3d" style="position: absolute; font-size:120px; left: 900px; top: 0px"></h1>

    <div id="chart_div" style="position: absolute; width: 900px; height: 700px; left: 800px; top: 300px"></div>
</body>

</html>
